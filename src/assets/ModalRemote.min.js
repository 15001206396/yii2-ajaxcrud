(function(b){b.fn.hasAttr=function(b){return void 0!==this.attr(b)}})(jQuery);
function ModalRemote(b){function h(a,d,c){var e=this;$.ajax({url:a,method:d,data:c,beforeSend:function(){k.call(e)},error:function(a){l.call(e,a)},success:function(a){m.call(e,a)}})}function k(){this.show();this.displayLoading()}function l(a){this.setTitle(a.status+a.statusText);this.setContent(a.responseText);this.addButton("Close","btn btn-default",function(a,c){this.hide()})}function m(a){void 0!==a.forceReload&&a.forceReload&&("true"==a.forceReload?$.pjax.reload({container:"#crud-datatable-pjax"}):
    $.pjax.reload({container:a.forceReload}));if(void 0!==a.forceClose&&a.forceClose)this.hide();else if(void 0!==a.size&&this.setSize(a.size),void 0!==a.title&&this.setTitle(a.title),void 0!==a.content&&this.setContent(a.content),void 0!==a.footer&&this.setFooter(a.footer),void 0!==$(this.content).find("form")[0]){var d=$(this.content).find("form")[0];a=$(this.footer).find('[type="submit"]')[0];if(void 0===a)console.warn("Modal have form but have not any submit button");else{var c=this;$(a).click(function(a){a=
    $(d).attr("action");var b=$(d).hasAttr("method")?$(d).attr("method"):"GET",f=$(d).serializeArray();$.ajax({url:a,method:b,data:f,beforeSend:function(){k.call(c)},error:function(a){l.call(c,a)},success:function(a){m.call(c,a)}})})}}}this.defaults={okLabel:"OK",cancelLabel:"Cancel",loadingTitle:"Loading"};this.modal=$(b);this.dialog=$(b).find(".modal-dialog");this.header=$(b).find(".modal-header");this.content=$(b).find(".modal-body");this.footer=$(b).find(".modal-footer");this.loadingContent='<div class="progress progress-striped active" style="margin-bottom:0;"><div class="progress-bar" style="width: 100%"></div></div>';
    this.show=function(){this.clear();$(this.modal).modal("show")};this.hide=function(){$(this.modal).modal("hide")};this.toggle=function(){$(this.modal).modal("toggle")};this.clear=function(){$(this.modal).find(".modal-title").remove();$(this.content).html("");$(this.footer).html("")};this.setHeader=function(a){$(this.header).html(a)};this.setContent=function(a){$(this.content).html(a)};this.setFooter=function(a){$(this.footer).html(a)};this.setTitle=function(a){$(this.header).find("h4.modal-title").remove();
        $(this.header).append('<h4 class="modal-title">'+a+"</h4>")};this.hidenCloseButton=function(){$(this.header).find("button.close").hide()};this.showCloseButton=function(){$(this.header).find("button.close").show()};this.addButton=function(a,d,c){buttonElm=document.createElement("button");buttonElm.setAttribute("class",null===d?"btn btn-primary":d);buttonElm.innerHTML=a;var b=this;$(this.footer).append(buttonElm);null!==c&&$(buttonElm).click(function(){c.call(b,this,event)})};this.displayLoading=function(){this.setContent(this.loadingContent);
        this.setTitle(this.defaults.loadingTitle)};this.confirm=function(a,d,c,b,g,f){void 0!==a&&this.setTitle(a);void 0!==d&&this.setContent(d);this.addButton(void 0===c?this.defaults.okLabel:c,"btn btn-primary",g);this.addButton(void 0===b?this.defaults.cancelLabel:b,"btn btn-default pull-left",f)};this.setSize=function(a){$(this.dialog).removeClass("modal-lg");$(this.dialog).removeClass("modal-sm");"large"==a?$(this.dialog).addClass("modal-lg"):"small"==a?$(this.dialog).addClass("modal-sm"):"normal"!==
    a&&console.warn("Not define size"+a)};this.remote=function(a,b){var c=$(a).hasAttr("href")?$(a).attr("href"):$(a).attr("data-url"),e=$(a).hasAttr("data-request-method")?$(a).attr("data-request-method"):"GET",g=$(a).hasAttr("data-modal-size")?$(a).attr("data-modal-size"):"normal";if($(a).hasAttr("data-confirm-title")||$(a).hasAttr("data-confirm-message")){this.show();this.setSize(g);var f=this;this.confirm($(a).attr("data-confirm-title"),$(a).attr("data-confirm-message"),$(a).attr("data-confirm-ok"),
        $(a).attr("data-confirm-cancel"),function(a){h.call(f,c,e,b)},function(a){this.hide()})}else h.call(this,c,e,b)}};